function defaultAddress(e){var r=home_url+"ajaxOrders.php?action=defaultAddress";$.post(r,{id:e},function(e){1==e&&window.location.reload()})}function saveAddress(e,r){var a=home_url+"ajaxOrders.php?action=defaultAddress";$.post(a,{id:r},function(r){1==r&&($(".receipt-list li .txt").text(""),e.attr("checked"),e.siblings(".txt").text("（默认地址）"))})}function get_code_time(){0==wait?($("#getmsgcode").removeAttr("disabled"),$("#getmsgcode").val("重新获取"),wait=60):($("#getmsgcode").attr("disabled",!0),$("#getmsgcode").val("("+wait+"s)后重新获取"),wait--,setTimeout("get_code_time()",1e3))}function payWeChat(e){if(e){var r=home_url+"libs/wechat/example/native.php";$.post(r,{orderid:e},function(r){r&&($("#weixin-pay-code").html(r),$("#weixin-modal").modal("show"),timingCheck(e))})}}function timingCheck(e){setInterval(function(){weChatCheck(e)},4e3)}function weChatCheck(e){var r=home_url+"libs/wechat/example/notify_orders.php",a={out_trade_no:e};$.post(r,a,function(e){1==e&&(window.location.href=home_url+"person.php?action=bought")})}$("#zhuce").click(function(){var e=$("#username"),r=$("#password"),a=$("#rpassword"),s=$("#tel"),t=$("#email");switch(!0){case e.val().length<6:return swal("","用户名不能少于6位字符！","error"),e.focus(),!1;case r.val().length<4:return swal("","登录密码不能少于4位字符！","error"),r.focus(),!1;case r.val()!=a.val():return swal("","登录密码不一致","error"),a.focus(),!1;case""==s.val():return swal("","手机号码不能为空！","error"),s.focus(),!1}return s.val().match(/^(((1[0-9]{1})|159|153)+\d{9})$/)?""==t.val()||t.match(/^[a-zA-Z0-9_-]+([-_.][a-zA-Z0-9_-]+)*@([a-zA-Z0-9_-]+[-.])+([a-zA-Z0-9_-]{2,3}){1,2}$/)?void 0:(swal("","邮箱格式不正确！请重新输入","error"),t.focus(),!1):(swal("","手机号码格式不正确！","error"),s.focus(),!1)}),$("#denglu").click(function(){var e=$("#username"),r=$("#password"),a=$("#valicode");switch(!0){case""==e.val():return swal("","用户名不能为空！","error"),e.focus(),!1;case""==r.val():return swal("","登录密码不能为空！","error"),r.focus(),!1;case""==a.val():return swal("","验证码不能为空！","error"),a.focus(),!1}}),$("#personal-send").click(function(){var e=$("#tel"),r=$("#email");if(""!=e.val()){if(!e.val().match(/^(((1[0-9]{1})|159|153)+\d{9})$/))return swal("","手机号码格式不正确！","error"),e.focus(),!1}else swal("","手机号码不能为空！","error");if(""!=r.val()){if(!r.val().match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/))return swal("","邮箱格式不正确！请重新输入","error"),r.focus(),!1}else swal("","邮箱不能为空！","error")}),$("#password-send").click(function(){var e=$("#password"),r=$("#newpassword"),a=$("#repeatpassword");switch(!0){case""==e.val():return swal("","原密码不能为空！","error"),e.focus(),!1;case r.val().length<4:return swal("","新密码不能少于4位字符！","error"),r.focus(),!1;case r.val()!=a.val():return swal("","两次密码输入不一致！","error"),a.focus(),!1}}),$("#addressadd-send").click(function(){var e=$("#address-name"),r=$("#address-tel"),a=$("#prov"),s=$("#address-detailed"),t=/^(((1[0-9]{1})|159|153)+\d{9})$/;switch(!0){case""==e.val():return swal("","收货人姓名不能为空！","error"),e.focus(),!1;case""==r.val():return swal("","联系电话不能为空！","error"),r.focus(),!1;case!t.test(r.val()):return swal("","联系电话格式不正确！","error"),r.focus(),!1;case""==a.val():return swal("","所在地区不能为空！","error"),a.focus(),!1;case""==s.val():return swal("","详细地址不能为空！","error"),s.focus(),!1}}),$(".user-plist a.user-plist-remove").click(function(){var e=$(this),r=$(this).data("id"),a=home_url+"ajaxOrders.php?action=lists";confirm("确定删除此记录么？")&&$.post(a,{id:r},function(r){1==r&&e.parent().remove()})}),$(".likes-list a.buy-like").click(function(){var e=$(this),r=$(this).data("id"),a=home_url+"ajaxOrders.php?action=like";confirm("确定不再收藏此商品么？")&&$.post(a,{id:r,loves:2},function(r){3==r&&e.parent().remove()})}),$(".address-list li a.delete-a").click(function(){var e=$(this),r=$(this).data("id"),a=home_url+"ajaxOrders.php?action=deleteAddress",s=confirm("确定删除此记录么？");console.log(s),s?(alert("当前收货地址已删除"),$.post(a,{id:r},function(r){1==r&&e.parents("li").remove()})):alert("您已取消当前操作")}),$(".receipt a.more").click(function(){$(".receipt-list li:eq(3)").is(":hidden")?($(".receipt-list li:gt(2)").stop().show(),$(".receipt a.more").text("收起>")):($(".receipt-list li:gt(2)").stop().hide(),$(".receipt a.more").text("更多收货地址>"))});var wait=60;$("#getmsgcode").click(function(){var e=$("#tel").val(),r=$("#forgetForm").attr("action");switch(!0){case""==e:return swal("","手机号码不能为空！","error"),$("#tel").focus(),!1}return new RegExp(/^[0-9-+]+$/).test(e)?($.ajax({type:"POST",url:r,data:{action:"getcode",tel:e},dataType:"json",success:function(e){1==e?(get_code_time(),swal("","发送成功，请注意查收！","success")):0==e?swal("","号码格式错误，请重新填写！","error"):-1==e&&swal("","您填写的手机号码不是注册会员，请前往注册","error")}}),!1):(swal("","请输入有效的手机号码！","error"),$("#tel").focus(),!1)}),$("#resetSubmit").click(function(){var e=$("#tel").val(),r=$(".msg").val(),a=$("#password").val(),s=$("#rpassword").val();switch(!0){case""==e:return swal("","手机号码不能为空！","error"),$("#tel").focus(),!1;case r.length>4:return swal("","短信验证码格式不对，请重新输入","error"),$(".msg").focus(),!1;case""==r:return swal("","请填写短信验证码","error"),$(".msg").focus(),!1;case""==a:return swal("","请输入重置密码","error"),$("#password").focus(),!1;case a.length<6:return swal("","重置密码不安全，请填写6位以上数字或字母","error"),$("#password").focus(),!1;case""==s:return swal("","请确认重置密码","error"),$("#rpassword").focus(),!1;case a!=s:return swal("","两次密码输入不一致！请重新输入","error"),!1}});